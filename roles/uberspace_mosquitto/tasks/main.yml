- name: Build mosquitto and all it's dependencies and extensions
  tags: build
  include_tasks: build.yml
- name: Setup and configure mosquitto
  include_tasks: mosquitto.yml
- name: Setup and configure auth plugin
  include_tasks: auth.yml
- name: Setup OwnTracks specifics - ot recorder
  include_tasks: otrecorder.yml
- name: Setup OwnTracks specifics - frontend
  tags: frontend
  include_tasks: frontend.yml
- name: Setup geogame specifics as loop
  tags: geogame
  loop: "{{ geogames }}"
  loop_control:
    loop_var: cur_geogame
    label: "{{ cur_geogame.event.handle }}"
  include_tasks: geogame.yml
- name: Setup caddy as reverse proxy
  tags: caddy
  include_tasks: caddy.yml